<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
                    xmlns:buttons="using:MyNotes.CustomControls.Buttons">
  
  <Style TargetType="buttons:AnimatedIconButton">
    <Setter Property="Background"
            Value="{ThemeResource TitleBarBackButtonBackground}" />
    <Setter Property="Foreground"
            Value="{ThemeResource TitleBarBackButtonForeground}" />
    <Setter Property="FontFamily"
            Value="{ThemeResource SymbolThemeFontFamily}" />
    <Setter Property="FontSize"
            Value="16" />
    <Setter Property="Width"
            Value="{ThemeResource TitleBarBackButtonWidth}" />
    <Setter Property="VerticalAlignment"
            Value="Stretch" />
    <Setter Property="HorizontalContentAlignment"
            Value="Center" />
    <Setter Property="VerticalContentAlignment"
            Value="Center" />
    <Setter Property="UseSystemFocusVisuals"
            Value="{StaticResource UseSystemFocusVisuals}" />
    <Setter Property="Content"
            Value="&#xEA3A;" />
    <Setter Property="Margin"
            Value="2" />
    <Setter Property="CornerRadius"
            Value="{ThemeResource ControlCornerRadius}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="buttons:AnimatedIconButton">
          <Grid x:Name="RootGrid"
                Background="{TemplateBinding Background}"
                CornerRadius="{TemplateBinding CornerRadius}">

            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />

                <VisualState x:Name="PointerOver">

                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid"
                                                   Storyboard.TargetProperty="Background">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonBackgroundPointerOver}" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentAnimatedIcon"
                                                   Storyboard.TargetProperty="Foreground">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonForegroundPointerOver}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                  <VisualState.Setters>
                    <Setter Target="ContentAnimatedIcon.(AnimatedIcon.State)"
                            Value="PointerOver" />

                  </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Pressed">

                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid"
                                                   Storyboard.TargetProperty="Background">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonBackgroundPressed}" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentAnimatedIcon"
                                                   Storyboard.TargetProperty="Foreground">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonForegroundPressed}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                  <VisualState.Setters>
                    <Setter Target="ContentAnimatedIcon.(AnimatedIcon.State)"
                            Value="Pressed" />

                  </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="Disabled">

                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid"
                                                   Storyboard.TargetProperty="Background">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonBackgroundDisabled}" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentAnimatedIcon"
                                                   Storyboard.TargetProperty="Foreground">
                      <DiscreteObjectKeyFrame KeyTime="0"
                                              Value="{ThemeResource TitleBarBackButtonForegroundDisabled}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>

              </VisualStateGroup>

            </VisualStateManager.VisualStateGroups>
            <AnimatedIcon x:Name="ContentAnimatedIcon"
                          Height="16"
                          Width="16"
                          AnimatedIcon.State="Normal"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                          AutomationProperties.AccessibilityView="Raw"
                          Source="{TemplateBinding AnimatedIconSource}">
              <AnimatedIcon.FallbackIconSource>
                <FontIconSource FontSize="{TemplateBinding FontSize}"
                                FontFamily="{TemplateBinding FontFamily}"
                                Glyph="{TemplateBinding Content}"
                                MirroredWhenRightToLeft="True" />
              </AnimatedIcon.FallbackIconSource>
            </AnimatedIcon>

          </Grid>

        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

</ResourceDictionary>
