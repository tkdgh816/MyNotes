<?xml version="1.0" encoding="utf-8"?>
<Page x:Class="MyNotes.Core.Views.NoteHubPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="using:CommunityToolkit.WinUI"
      xmlns:controls="using:CommunityToolkit.WinUI.Controls"
      xmlns:models="using:MyNotes.Core.Models"
      xmlns:views="using:MyNotes.Core.Views">

  <Page.Resources>
    <!--#region GridView ItemTemplate: Grid Style -->
    <DataTemplate x:Key="GridViewItemTemplate1"
                  x:DataType="models:Note">
      <UserControl Margin="6"
                   PointerEntered="Grid_PointerEntered"
                   PointerExited="Grid_PointerExited">
        <Grid Background="{x:Bind Background, Converter={StaticResource ColorToBrushConverter}, Mode=OneWay}"
              CornerRadius="8"
              BorderBrush="{StaticResource ControlStrokeColorDefaultBrush}"
              BorderThickness="1"
              Translation="0,0,12">

          <Grid.Shadow>
            <ThemeShadow />
          </Grid.Shadow>

          <Grid.RowDefinitions>
            <RowDefinition Height="32" />
            <RowDefinition />
          </Grid.RowDefinitions>
          <Grid Grid.Row="0"
                Background="{x:Bind Background, Converter={StaticResource ColorToLayerBrushConverter}, Mode=OneWay}"
                BorderBrush="{StaticResource ControlStrokeColorDefaultBrush}"
                BorderThickness="0,0,0,1">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Button x:Name="VIEW_BookmarkButton"
                    Grid.Column="0"
                    HorizontalAlignment="Left"
                    Style="{StaticResource AppFontIconNormalButtonStyle}"
                    Content="{x:Bind IsBookmarked, Converter={StaticResource BoolToBookmarkIconGlyphConverter}, Mode=OneWay}"
                    CornerRadius="8,4,4,4"
                    Visibility="Collapsed"
                    Click="VIEW_BookmarkButton_Click" />
            <TextBlock Grid.Column="1"
                       Padding="6,0"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Text="{x:Bind Title, Mode=OneWay}"
                       TextTrimming="CharacterEllipsis"
                       TextWrapping="NoWrap"
                       Style="{StaticResource BodyStrongTextBlockStyle}" />
            <Button x:Name="VIEW_MoreButton"
                    Grid.Column="2"
                    HorizontalAlignment="Right"
                    Style="{StaticResource AppFontIconNormalButtonStyle}"
                    Content="&#xE712;"
                    CornerRadius="4,8,4,4"
                    Visibility="Collapsed">
              <Button.Flyout>
                <CommandBarFlyout Placement="Bottom"
                                  AlwaysExpanded="True">
                  <AppBarButton Label="View"
                                Icon="{ui:FontIcon Glyph=&#xE8AD;}" />
                  <AppBarButton Label="Share"
                                Icon="Share" />
                  <AppBarButton x:Name="VIEW_RemoveNoteButton"
                                Label="Remove"
                                Icon="Delete" 
                                Click="VIEW_RemoveNoteButton_Click"
                                Command="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                  <CommandBarFlyout.SecondaryCommands>
                    <AppBarButton x:Name="VIEW_MoveToBoardButton"
                                  Label="Move to board"
                                  Icon="{ui:FontIcon Glyph=&#xE8DE;}"
                                  Click="VIEW_MoveToBoardButton_Click" />
                    <AppBarButton Label="Rename title"
                                  Icon="{ui:FontIcon Glyph=&#xE8AC;}" />
                    <AppBarButton x:Name="VIEW_EditTagsButton"
                                  Label="Edit tags"
                                  Icon="{ui:FontIcon Glyph=&#xE932;}"
                                  Click="VIEW_EditTagsButton_Click" />
                    <AppBarSeparator />
                    <AppBarButton Label="About"
                                  Icon="{ui:FontIcon Glyph=&#xE946;}" />
                  </CommandBarFlyout.SecondaryCommands>
                </CommandBarFlyout>
              </Button.Flyout>
            </Button>
          </Grid>
          <TextBlock Grid.Row="1"
                     Margin="6"
                     Text="{x:Bind Body, Mode=OneWay}"
                     DoubleTapped="UserControl_DoubleTapped" />

          <Grid x:Name="VIEW_CommandBarGrid"
                Grid.Row="1"
                Visibility="Collapsed"
                VerticalAlignment="Bottom"
                Background="{x:Bind Background, Converter={StaticResource ColorToBrushConverter}, Mode=OneWay}">
            <ScrollViewer HorizontalScrollMode="Enabled"
                          VerticalScrollMode="Disabled"
                          HorizontalScrollBarVisibility="Hidden"
                          VerticalScrollBarVisibility="Disabled">
              <ItemsRepeater ItemsSource="{x:Bind Tags}"
                             Margin="4">
                <ItemsRepeater.Layout>
                  <StackLayout Orientation="Horizontal"
                               Spacing="4" />
                </ItemsRepeater.Layout>
                <ItemsRepeater.ItemTemplate>
                  <DataTemplate x:DataType="x:String">
                    <views:AppTagButton Click="AppTagButton_Click"
                                        RemoveButtonVisible="Collapsed">
                      <TextBlock Text="{x:Bind}"
                                 TextTrimming="CharacterEllipsis" />
                    </views:AppTagButton>
                  </DataTemplate>
                </ItemsRepeater.ItemTemplate>
              </ItemsRepeater>
            </ScrollViewer>
          </Grid>

          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="HoverStates">
              <VisualState x:Name="HoverStateNormal" />
              <VisualState x:Name="HoverStateHovering">
                <Storyboard>
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_CommandBarGrid"
                                                 Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="Visible" />
                  </ObjectAnimationUsingKeyFrames>
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_BookmarkButton"
                                                 Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="Visible" />
                  </ObjectAnimationUsingKeyFrames>
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_MoreButton"
                                                 Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="Visible" />
                  </ObjectAnimationUsingKeyFrames>
                </Storyboard>
              </VisualState>
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>
        </Grid>
      </UserControl>
    </DataTemplate>
    <!--#endregion-->

    <!--#region GridView ItemTemplate: List Style -->
    <DataTemplate x:Key="GridViewItemTemplate2"
                  x:DataType="models:Note">
      <UserControl Margin="6"
                   PointerEntered="Grid_PointerEntered"
                   PointerExited="Grid_PointerExited"
                   DoubleTapped="UserControl_DoubleTapped">
        <Grid Background="{x:Bind Background, Converter={StaticResource ColorToBrushConverter}, Mode=OneWay}"
              CornerRadius="8"
              BorderBrush="{StaticResource ControlStrokeColorDefaultBrush}"
              BorderThickness="1"
              Translation="0,0,12">
          <Grid.ColumnDefinitions>
            <ColumnDefinition MinWidth="120"
                              MaxWidth="200" />
            <ColumnDefinition Width="5*" />
          </Grid.ColumnDefinitions>
          <Grid Grid.Column="0"
                Background="{StaticResource SubtleFillColorSecondary}"
                BorderBrush="{StaticResource ControlStrokeColorDefaultBrush}"
                BorderThickness="0,0,1,0">
            <TextBlock Padding="6"
                       VerticalAlignment="Center"
                       TextAlignment="Center"
                       Text="{x:Bind Title, Mode=OneWay}"
                       TextTrimming="CharacterEllipsis"
                       Style="{StaticResource BodyStrongTextBlockStyle}" />
          </Grid>
          <Grid Grid.Column="1">
            <TextBlock Margin="6"
                       Text="{x:Bind Body, Mode=OneWay}" />
            <Grid x:Name="VIEW_CommandBarGrid"
                  Visibility="Collapsed"
                  VerticalAlignment="Bottom"
                  Background="{x:Bind Background, Converter={StaticResource ColorToBrushConverter}, Mode=OneWay}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <ScrollViewer Grid.Column="0"
                            HorizontalScrollMode="Enabled"
                            VerticalScrollMode="Disabled"
                            HorizontalScrollBarVisibility="Hidden"
                            VerticalScrollBarVisibility="Disabled">
                <ItemsRepeater ItemsSource="{x:Bind Tags}"
                               Margin="4,0">
                  <ItemsRepeater.Layout>
                    <StackLayout Orientation="Horizontal"
                                 Spacing="4" />
                  </ItemsRepeater.Layout>
                  <ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="x:String">
                      <views:AppTagButton Click="AppTagButton_Click">
                        <TextBlock Text="{x:Bind}"
                                   TextTrimming="CharacterEllipsis" />
                      </views:AppTagButton>
                    </DataTemplate>
                  </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
              </ScrollViewer>

              <StackPanel Grid.Column="1"
                          Orientation="Horizontal"
                          HorizontalAlignment="Right">

                <Button Style="{StaticResource AppFontIconNormalButtonStyle}"
                        Content="&#xE734;" />
                <Button Style="{StaticResource AppFontIconNormalButtonStyle}"
                        Content="&#xE712;" />
              </StackPanel>
            </Grid>
          </Grid>

          <Grid.Shadow>
            <ThemeShadow />
          </Grid.Shadow>

          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="HoverStates">
              <VisualState x:Name="HoverStateNormal" />
              <VisualState x:Name="HoverStateHovering">
                <Storyboard>
                  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_CommandBarGrid"
                                                 Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="Visible" />
                  </ObjectAnimationUsingKeyFrames>
                </Storyboard>
              </VisualState>
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>
        </Grid>
      </UserControl>
    </DataTemplate>
    <!--#endregion-->
  </Page.Resources>

  <!--#region Navigation Header -->
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition />
    </Grid.RowDefinitions>

    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <!--#region Icon -->
      <Button Style="{StaticResource AppIconMediumButtonStyle}"
              Visibility="{x:Bind Navigation, Converter={StaticResource NavigationBoardToVisibilityConverter}}"
              Margin="0,0,8,0">
        <IconSourceElement IconSource="{x:Bind Navigation.Icon, Converter={StaticResource IconToIconSourceConverter}, Mode=OneWay}" />
        <Button.Flyout>
          <Flyout Placement="BottomEdgeAlignedLeft">
            <views:IconPicker x:Name="VIEW_IconPicker"
                              Icon="{x:Bind Navigation.Icon, Mode=TwoWay}" />
          </Flyout>
        </Button.Flyout>
      </Button>
      <!--#endregion-->

      <!--#region Title -->
      <TextBlock Grid.Column="1"
                 Text="{x:Bind Navigation.Name, Mode=OneWay}"
                 Style="{StaticResource TitleTextBlockStyle}"
                 TextWrapping="NoWrap"
                 Margin="0,0,8,0" />

      <!--#endregion -->

      <!--#region New Note Button -->
      <views:AppCompoundButton x:Name="VIEW_NewNoteButton"
                               Grid.Column="2"
                               Icon="Add"
                               Content="New note"
                               Style="{StaticResource AppCommandBarButtonStyle}"
                               Visibility="{x:Bind Navigation, Converter={StaticResource NavigationBoardToVisibilityConverter}}"
                               Click="VIEW_NewNoteButton_Click" />
      <!--#endregion-->

      <!--#region Search Button -->
      <Grid Grid.Column="3">
        <Button x:Name="VIEW_SearchButton"
                HorizontalAlignment="Right"
                Style="{StaticResource AppFontIconMediumButtonStyle}"
                Content="&#xE721;"
                Click="VIEW_SearchButton_Click">
        </Button>
        <AutoSuggestBox x:Name="VIEW_SearchAutoSuggestBox"
                        Visibility="Collapsed"
                        PlaceholderText="Search within this page."
                        QueryIcon="Find"
                        VerticalAlignment="Center"
                        Width="250"
                        Margin="4,0"
                        LostFocus="VIEW_SearchAutoSuggestBox_LostFocus"
                        LayoutUpdated="VIEW_SearchAutoSuggestBox_LayoutUpdated">
          <AutoSuggestBox.RenderTransform>
            <TranslateTransform x:Name="VIEW_SearchAutoSuggestBox_TranslateTransform" />
          </AutoSuggestBox.RenderTransform>
        </AutoSuggestBox>
        <Grid.Clip>
          <RectangleGeometry Rect="0,0,258,64" />
        </Grid.Clip>
      </Grid>
      <!--#endregion -->

      <!--#region More Button -->
      <Button Grid.Column="4"
              Style="{StaticResource AppFontIconMediumButtonStyle}"
              Content="&#xE712;">
        <Button.Flyout>
          <MenuFlyout Placement="BottomEdgeAlignedRight">
            <MenuFlyout.MenuFlyoutPresenterStyle>
              <Style TargetType="MenuFlyoutPresenter"
                     BasedOn="{StaticResource DefaultMenuFlyoutPresenterStyle}">
                <Setter Property="Background"
                        Value="{ThemeResource FlyoutPresenterBackground}" />
              </Style>
            </MenuFlyout.MenuFlyoutPresenterStyle>
            <MenuFlyoutItem Text="Rename title"
                            Icon="Rename"
                            Visibility="{x:Bind Navigation, Converter={StaticResource NavigationBoardToVisibilityConverter}}" />
            <MenuFlyoutSeparator />
            <MenuFlyoutSubItem Text="Ordering"
                               Icon="Sort">
              <RadioMenuFlyoutItem GroupName="By"
                                   Text="Modified"
                                   IsChecked="True" 
                                   Command="{x:Bind ViewModel.SortCommand}"
                                   CommandParameter="Modified"/>
              <RadioMenuFlyoutItem GroupName="By"
                                   Text="Created"
                                   Command="{x:Bind ViewModel.SortCommand}"
                                   CommandParameter="Created" />
              <RadioMenuFlyoutItem GroupName="By"
                                   Text="Title"
                                   Command="{x:Bind ViewModel.SortCommand}"
                                   CommandParameter="Title" />
              <RadioMenuFlyoutItem GroupName="By"
                                   Text="Tag" />
              <MenuFlyoutSeparator />
              <RadioMenuFlyoutItem GroupName="In"
                                   Text="Ascending"
                                   IsChecked="True" />
              <RadioMenuFlyoutItem GroupName="In"
                                   Text="Descending" />
            </MenuFlyoutSubItem>
            <MenuFlyoutSubItem Text="View"
                               Icon="View">
              <views:AppMenuFlyoutItem>
                <StackPanel Spacing="12">
                  <RadioButtons x:Name="VIEW_ViewChangeRadioButtons"
                                Header="View"
                                HeaderTemplate="{StaticResource AppBoldTextHeaderTemplate}"
                                SelectedIndex="0"
                                MaxColumns="2">
                    <RadioButtons.Resources>
                      <SolidColorBrush x:Key="ToggleButtonBackground"
                                       Color="{StaticResource SubtleFillColorTransparent}" />
                      <SolidColorBrush x:Key="ToggleButtonBackgroundPointerOver"
                                       Color="{StaticResource SubtleFillColorSecondary}" />
                      <SolidColorBrush x:Key="ToggleButtonBackgroundPressed"
                                       Color="{StaticResource SubtleFillColorTertiary}" />
                      <SolidColorBrush x:Key="ToggleButtonBackgroundDisabled"
                                       Color="{StaticResource SubtleFillColorDisabled}" />
                    </RadioButtons.Resources>
                    <RadioButton Tag="GridStyle"
                                 IsChecked="True"
                                 Style="{StaticResource DefaultToggleButtonStyle}"
                                 Click="VIEW_StyleChangeRadioButton_Click">
                      <StackPanel Orientation="Horizontal"
                                  Spacing="8">
                        <FontIcon Glyph="&#xF0E2;"
                                  FontSize="18" />
                        <TextBlock Text="Grid" />
                      </StackPanel>
                    </RadioButton>
                    <RadioButton Tag="ListStyle"
                                 Style="{StaticResource DefaultToggleButtonStyle}"
                                 Click="VIEW_StyleChangeRadioButton_Click">
                      <StackPanel Orientation="Horizontal"
                                  Spacing="8">
                        <FontIcon Glyph="&#xE71D;"
                                  FontSize="18" />
                        <TextBlock Text="List" />
                      </StackPanel>
                    </RadioButton>
                  </RadioButtons>

                  <MenuFlyoutSeparator />

                  <Grid>
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Slider x:Name="VIEW_StyleChangeSlider"
                            Grid.Row="0"
                            Header="Size"
                            HeaderTemplate="{StaticResource AppBoldTextHeaderTemplate}"
                            Orientation="Horizontal"
                            TickFrequency="30"
                            TickPlacement="Outside"
                            Minimum="150"
                            Maximum="270"
                            Value="210"
                            Width="240"
                            SnapsTo="Ticks"
                            IsThumbToolTipEnabled="False"
                            ValueChanged="VIEW_StyleChangeSlider_ValueChanged" />
                    <Grid Grid.Row="1">
                      <TextBlock Text="Small"
                                 HorizontalAlignment="Left"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                      <TextBlock Text="Medium"
                                 HorizontalAlignment="Center"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                      <TextBlock Text="Large"
                                 HorizontalAlignment="Right"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                    </Grid>
                  </Grid>

                  <Grid Visibility="{x:Bind VIEW_ViewChangeRadioButtons.SelectedIndex, Converter={StaticResource IntZeroToVisibilityConverter}, Mode=OneWay}">
                    <Grid.RowDefinitions>
                      <RowDefinition Height="Auto" />
                      <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Slider x:Name="VIEW_RatioChangeSlider"
                            Grid.Row="0"
                            Header="Vertical ratio"
                            HeaderTemplate="{StaticResource AppBoldTextHeaderTemplate}"
                            Orientation="Horizontal"
                            TickFrequency="50"
                            TickPlacement="Outside"
                            Minimum="0"
                            Maximum="100"
                            Value="50"
                            Width="240"
                            SnapsTo="Ticks"
                            IsThumbToolTipEnabled="False"
                            ValueChanged="VIEW_RatioChangeSlider_ValueChanged" />
                    <Grid Grid.Row="1">
                      <TextBlock Text="Short&#10;(4:3)"
                                 HorizontalAlignment="Left"
                                 TextAlignment="Center"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                      <TextBlock Text="Moderate&#10;(1:1)"
                                 HorizontalAlignment="Center"
                                 TextAlignment="Center"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                      <TextBlock Text="Tall&#10;(4:5)"
                                 HorizontalAlignment="Right"
                                 TextAlignment="Center"
                                 Style="{StaticResource CaptionTextBlockStyle}" />
                    </Grid>
                  </Grid>
                </StackPanel>
              </views:AppMenuFlyoutItem>
            </MenuFlyoutSubItem>
            <MenuFlyoutSeparator />
            <MenuFlyoutItem Text="Remove notes"
                            Icon="Delete" />
            <MenuFlyoutItem Text="Remove board"
                            Icon="Delete"
                            Visibility="{x:Bind Navigation, Converter={StaticResource NavigationBoardToVisibilityConverter}}" />
          </MenuFlyout>
        </Button.Flyout>
      </Button>
      <!--#endregion-->
    </Grid>
    <!--#endregion-->

    <!--#region Notes List GridView -->
    <GridView x:Name="VIEW_NotesGridView"
              Grid.Row="1"
              ScrollViewer.VerticalScrollBarVisibility="Auto"
              ScrollViewer.VerticalScrollMode="Enabled"
              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
              ScrollViewer.HorizontalScrollMode="Disabled"
              ItemsSource="{x:Bind ViewModel.NotesCollectionViewSource.View, Mode=OneWay}"
              SelectionMode="None"
              ItemContainerStyle="{StaticResource AppGridViewItemContainerStyle210Moderate}"
              ItemTemplate="{StaticResource GridViewItemTemplate1}"
              ChoosingItemContainer="GridView_ChoosingItemContainer"
              ContainerContentChanging="GridView_ContainerContentChanging"
              AllowFocusOnInteraction="False"
              IncrementalLoadingThreshold="10" />
    <!--#endregion-->

    <ContentDialog x:Name="VIEW_MoveToBoardContentDialog"
                   Title="Move to selected board"
                   PrimaryButtonText="Move"
                   IsPrimaryButtonEnabled="{x:Bind VIEW_MoveToBoardTreeView.SelectedItem, Converter={StaticResource NotNullToBoolConverter}, Mode=OneWay}"
                   CloseButtonText="Close"
                   DefaultButton="Primary">
      <TreeView x:Name="VIEW_MoveToBoardTreeView"
                ItemsSource="{x:Bind MainViewModel.BoardMenuItems}"
                CanDragItems="False"
                CanReorderItems="False"
                MinWidth="300"
                MinHeight="240"
                MaxHeight="400">
        <TreeView.Resources>
          <Thickness x:Key="TreeViewItemPresenterMargin">0,2</Thickness>
          <Thickness x:Key="TreeViewItemPresenterPadding">0,2</Thickness>
        </TreeView.Resources>
        <TreeView.ItemTemplateSelector>
          <views:NavigationItemTreeViewItemTemplateSelector>
            <views:NavigationItemTreeViewItemTemplateSelector.GroupItem>
              <DataTemplate x:DataType="models:NavigationBoardGroup">
                <TreeViewItem ItemsSource="{x:Bind Children}"
                              IsEnabled="False"
                              IsExpanded="True">
                  <Grid ColumnSpacing="8"
                        Height="24">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="24" />
                      <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <IconSourceElement Grid.Column="0"
                                       IconSource="{x:Bind Icon, Converter={StaticResource IconToIconSourceConverter}}"
                                       VerticalAlignment="Center" />
                    <Border Grid.Column="0"
                            Background="{StaticResource LayerFillColorDefault}" />
                    <TextBlock Grid.Column="1"
                               Text="{x:Bind Name}"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource TextFillColorDisabled}" />
                  </Grid>
                </TreeViewItem>
              </DataTemplate>
            </views:NavigationItemTreeViewItemTemplateSelector.GroupItem>
            <views:NavigationItemTreeViewItemTemplateSelector.BoardItem>
              <DataTemplate x:DataType="models:NavigationBoard">
                <TreeViewItem VerticalContentAlignment="Center">
                  <Grid ColumnSpacing="12"
                        Height="24">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="24" />
                      <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <IconSourceElement Grid.Column="0"
                                       IconSource="{x:Bind Icon, Converter={StaticResource IconToIconSourceConverter}}"
                                       VerticalAlignment="Center" />
                    <TextBlock Grid.Column="1"
                               VerticalAlignment="Center"
                               Text="{x:Bind Name}"
                               Style="{StaticResource BodyStrongTextBlockStyle}" />
                  </Grid>
                </TreeViewItem>
              </DataTemplate>
            </views:NavigationItemTreeViewItemTemplateSelector.BoardItem>
          </views:NavigationItemTreeViewItemTemplateSelector>
        </TreeView.ItemTemplateSelector>
      </TreeView>
    </ContentDialog>

    <ContentDialog x:Name="VIEW_EditTagsContentDialog"
                   Title="Edit tags"
                   CloseButtonText="Close">
      <Grid RowSpacing="12"
            MaxWidth="300">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock x:Name="VIEW_EditTagsHeaderTextBlock"
                   TextTrimming="CharacterEllipsis"
                   TextWrapping="NoWrap"
                   Style="{StaticResource BodyStrongTextBlockStyle}" />

        <ScrollView Grid.Row="1"
                    ContentOrientation="Vertical"
                    Padding="8">
          <ItemsRepeater x:Name="VIEW_EditTagsItemsRepeater">
            <ItemsRepeater.Layout>
              <controls:WrapLayout HorizontalSpacing="4"
                                   VerticalSpacing="4" />
            </ItemsRepeater.Layout>

            <ItemsRepeater.ItemTemplate>
              <DataTemplate x:DataType="x:String">
                <views:AppTagButton Content="{x:Bind}" />
              </DataTemplate>
            </ItemsRepeater.ItemTemplate>
          </ItemsRepeater>
        </ScrollView>

        <Grid Grid.Row="2"
              ColumnSpacing="8">
          <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>
          <AutoSuggestBox x:Name="VIEW_AddTagAutoSuggestBox"
                          Grid.Column="0"
                          PlaceholderText="Enter new tag"
                          GotFocus="VIEW_AddTagAutoSuggestBox_GotFocus"
                          TextChanged="VIEW_AddTagAutoSuggestBox_TextChanged"
                          QuerySubmitted="VIEW_AddTagAutoSuggestBox_QuerySubmitted"
                          MaxSuggestionListHeight="200" />
          <!--<TextBox x:Name="VIEW_AddTagTextBox"
                   Grid.Column="0"
                   PlaceholderText="Enter new tag" />-->
          <Button x:Name="VIEW_AddTagButton"
                  Grid.Column="1"
                  Content="Add"
                  Style="{StaticResource AccentButtonStyle}"
                  Click="VIEW_AddTagButton_Click" />
        </Grid>
      </Grid>
    </ContentDialog>
    <!--#region VisualStateManager -->
    <VisualStateManager.VisualStateGroups>
      <VisualStateGroup x:Name="SearchBoxStates">
        <VisualState x:Name="SearchBoxSearching">
          <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchButton"
                                           Storyboard.TargetProperty="Visibility">
              <DiscreteObjectKeyFrame KeyTime="0"
                                      Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchButton"
                                           Storyboard.TargetProperty="Opacity">
              <DiscreteObjectKeyFrame KeyTime="0"
                                      Value="0" />
            </ObjectAnimationUsingKeyFrames>

            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox"
                                           Storyboard.TargetProperty="Visibility">
              <DiscreteObjectKeyFrame KeyTime="0"
                                      Value="Visible" />
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox"
                                           Storyboard.TargetProperty="Opacity">
              <DiscreteDoubleKeyFrame KeyTime="0"
                                      Value="0" />
              <SplineDoubleKeyFrame KeyTime="0:0:0.25"
                                    KeySpline="0.2,0 0,1"
                                    Value="1" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox_TranslateTransform"
                                           Storyboard.TargetProperty="X">
              <DiscreteDoubleKeyFrame KeyTime="0"
                                      Value="40" />
              <SplineDoubleKeyFrame KeyTime="0:0:0.25"
                                    KeySpline="0.2,0 0,1"
                                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
          </Storyboard>
        </VisualState>
        <VisualState x:Name="SearchBoxNormal">
          <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchButton"
                                           Storyboard.TargetProperty="Visibility">
              <DiscreteObjectKeyFrame KeyTime="0:0:0.125"
                                      Value="Visible" />
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchButton"
                                           Storyboard.TargetProperty="Opacity"
                                           BeginTime="0:0:0.125">
              <DiscreteDoubleKeyFrame KeyTime="0"
                                      Value="0" />
              <LinearDoubleKeyFrame KeyTime="0:0:0.25"
                                    Value="1" />
            </DoubleAnimationUsingKeyFrames>

            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox"
                                           Storyboard.TargetProperty="Visibility">
              <DiscreteObjectKeyFrame KeyTime="0:0:0.25"
                                      Value="Collapsed" />
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox"
                                           Storyboard.TargetProperty="Opacity">
              <DiscreteDoubleKeyFrame KeyTime="0"
                                      Value="1" />
              <SplineDoubleKeyFrame KeyTime="0:0:0.25"
                                    KeySpline="0.1,0.9 0.2,1.0"
                                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VIEW_SearchAutoSuggestBox_TranslateTransform"
                                           Storyboard.TargetProperty="X">
              <DiscreteDoubleKeyFrame KeyTime="0"
                                      Value="0" />
              <SplineDoubleKeyFrame KeyTime="0:0:0.25"
                                    KeySpline="0.1,0.9 0.2,1.0"
                                    Value="40" />
            </DoubleAnimationUsingKeyFrames>
          </Storyboard>
        </VisualState>
      </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <!--#endregion-->
  </Grid>
</Page>
